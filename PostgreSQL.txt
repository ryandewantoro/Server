SET SESSION idle_in_transaction_session_timeout = '3min';

SELECT * FROM pg_stat_activity WHERE state = 'idle';

SELECT * FROM pg_stat_activity WHERE state = 'idle';
pg_terminate_backend

SELECT pg_terminate_backend(<pid of the process>)


SELECT pg_terminate_backend(pid) FROM pg_stat_activity
WHERE datname = 'moodle_2020'
AND pid <> pg_backend_pid()
AND state in ('idle');

#final
SELECT pg_terminate_backend(pid) FROM pg_stat_activity
WHERE pid <> pg_backend_pid()
AND state in ('idle');
